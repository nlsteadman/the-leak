{"ast":null,"code":"var _jsxFileName = \"/Users/endor/Flatiron/code/the-leak/client/src/components/LocationDetail.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport ProductCard from './ProductCard';\nimport ReviewCard from './ReviewCard';\nimport { headers, getToken, baseUrl } from './Globals';\nimport { MyContext } from '../context/MyContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LocationDetail = () => {\n  _s();\n\n  const {\n    locations\n  } = useContext(MyContext);\n  const {\n    loggedIn\n  } = useContext(MyContext);\n  const {\n    reviews\n  } = useContext(MyContext);\n  const {\n    currentUser\n  } = useContext(MyContext);\n  const {\n    addToList\n  } = useContext(MyContext);\n  const [location, setLocation] = useState({\n    products: [],\n    reviews: []\n  });\n  const [locationReviews, setLocationReviews] = useState([]);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (locations) {\n      setLocation(locations.find(location => location.id.toString() === id));\n    }\n  }, [locations, id]);\n  useEffect(() => {\n    if (reviews) {\n      setLocationReviews(reviews.filter(review => review.location_id.toString() === id));\n    }\n  }, [reviews, id]);\n\n  const locationTypeDetails = () => {\n    if (location.location_type) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"location-type-div\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"location-type-info\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Location Type: \", location.location_type.org]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }, this);\n    }\n  };\n\n  const productCards = location.products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n    product: product\n  }, product.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 59\n  }, this));\n  const reviewCards = locationReviews.map(review => /*#__PURE__*/_jsxDEV(ReviewCard, {\n    review: review\n  }, review.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 55\n  }, this));\n\n  const handleSubmit = () => {\n    if (loggedIn) {\n      const params = {\n        review: {\n          \"user_id\": currentUser.id,\n          \"location_id\": id,\n          \"content\": \"\"\n        }\n      };\n      fetch(baseUrl + '/reviews', {\n        method: \"POST\",\n        headers: { ...headers,\n          ...getToken()\n        },\n        body: JSON.stringify(params)\n      }).then(r => r.json()).then(review => {\n        addToList(review);\n        navigate('/users/:id');\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      id: \"detail-location-name\",\n      children: location.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"detail-detail\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"detail-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"detail-location-img\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: location.image_url,\n            alt: \"location\",\n            height: \"550\",\n            width: \"400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"products\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              id: \"heading\",\n              children: \"Products: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this), productCards]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"list-button\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSubmit,\n              children: \"Add to my list\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"detail-info\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"location-description\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: location.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: location.hours\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this), locationTypeDetails()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        id: \"review-heading\",\n        children: \"Reviews: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"review-cards\",\n        children: reviewCards\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LocationDetail, \"4JlMcE4Qd9XNigheexBiaykzHKo=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = LocationDetail;\nexport default LocationDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"LocationDetail\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","ProductCard","ReviewCard","headers","getToken","baseUrl","MyContext","LocationDetail","locations","loggedIn","reviews","currentUser","addToList","location","setLocation","products","locationReviews","setLocationReviews","id","navigate","find","toString","filter","review","location_id","locationTypeDetails","location_type","org","productCards","map","product","reviewCards","handleSubmit","params","fetch","method","body","JSON","stringify","then","r","json","name","image_url","address","hours"],"sources":["/Users/endor/Flatiron/code/the-leak/client/src/components/LocationDetail.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { useParams } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom';\nimport ProductCard from './ProductCard';\nimport ReviewCard from './ReviewCard';\nimport { headers, getToken, baseUrl } from './Globals';\nimport { MyContext } from '../context/MyContext';\n\n\nconst LocationDetail = () => {\n    const {locations} = useContext(MyContext);\n    const {loggedIn} = useContext(MyContext);\n    const {reviews} = useContext(MyContext);\n    const {currentUser} = useContext(MyContext);\n    const {addToList} = useContext(MyContext);\n\n    const [location, setLocation] = useState({ products: [], reviews: [] });\n    const [locationReviews, setLocationReviews] = useState([]);\n    const { id } = useParams();\n    const navigate = useNavigate();\n\n\n    useEffect(() => {\n        if( locations ) {\n            setLocation(locations.find(location => location.id.toString() === id));\n        }\n    }, [locations, id])\n\n    useEffect(() => {\n        if (reviews) {\n            setLocationReviews(reviews.filter(review => review.location_id.toString() === id))\n        }\n    }, [reviews, id])\n\n\n    const locationTypeDetails = () => {\n        if (location.location_type) {\n            return ( \n                <div id=\"location-type-div\">\n                    <div id=\"location-type-info\">\n                        <p>Location Type: { location.location_type.org }</p>\n                    </div>\n                </div>\n            )\n        } \n    }\n\n    const productCards = location.products.map(product => <ProductCard key={ product.id } product={ product } />)\n\n    const reviewCards = locationReviews.map(review => <ReviewCard key={ review.id } review={ review } />)\n\n\n        \n    const handleSubmit = () => {\n        if (loggedIn) {\n            const params = {\n                review: {\n                    \"user_id\": currentUser.id,\n                    \"location_id\": id,\n                    \"content\": \"\"\n                }\n            }\n    \n            fetch(baseUrl + '/reviews', {\n                method: \"POST\",\n                headers: {\n                    ...headers,\n                    ...getToken()\n                },\n                body: JSON.stringify(params)\n            })\n                .then(r => r.json())\n                .then(review => {\n                    addToList(review);\n                    navigate('/users/:id')\n                })\n        }\n    }\n\n  return (\n    <div>\n        <h3 id=\"detail-location-name\">{ location.name }</h3>\n        <br/>\n        <br/>\n        <div id=\"detail-detail\">\n            <div id=\"detail-card\">\n                <div id=\"detail-location-img\">\n                    <img src={ location.image_url } alt=\"location\" height=\"550\" width=\"400\"/>\n                </div>\n                <div>\n                    <div id=\"products\">\n                        <h3 id=\"heading\">Products: </h3>\n                        { productCards }\n                    </div>\n                    <div id=\"list-button\">\n                        <button onClick={ handleSubmit }>Add to my list</button>\n                    </div>\n                </div>\n            </div>\n            <div id=\"detail-info\">\n                <div id=\"location-description\">\n                    <p>{ location.address }</p>\n                    <p>{ location.hours }</p>\n                    { locationTypeDetails() }\n                </div>\n            </div>\n        </div>\n        <br/>\n        <br/>\n        <br/>\n        <div>\n            <h3 id=\"review-heading\">Reviews: </h3>\n            <div id=\"review-cards\">\n            { reviewCards }\n            </div>\n        </div>\n    </div>\n  )\n}\n\nexport default LocationDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module"}